/*!
 * Ekko Lightbox v5.3.0
 * http://ashleydw.github.io/lightbox/
 * Copyright 2017 Ashley White
 * Released under the MIT license
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){var t=function(t,n){this.options=e.extend({title:"",footer:"",maxWidth:9999,maxHeight:9999,showArrows:!0,wrapping:!0,type:null,alwaysShowClose:!1,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:"<span>&#10094;</span>",rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}},n);this.$element=e(t),this.modal=null,this.prevActive=null,this.gallery=this.$element.attr("data-gallery"),this.padding=null,this.initRemoteContent(),this.initGalleryEvents(),this.initFunctions(),this.create(this.options),this.lightboxOpen=!1,this.navigateDirection=null,this.navigateClicked=!1,this.$element.on("click.ekkoLightbox",this.options.delegate||null,function(t){if(t.preventDefault(),t.stopPropagation(),e(this).hasClass("disabled"))return void t.preventDefault();var n=e(this);n.attr("data-remote")&&""!==n.attr("data-remote")||n.attr("href")&&""!==n.attr("href")||n.attr("data-gallery")?t.delegatedCall=!0:t.delegatedCall=!1})};return t.prototype={create:function(t){var n=this;this.lightboxOpen=!0,this.options=e.extend({},this.options,t),this.modal=e(this.options.doc).find('#ekkoLightbox-'+this.$element.attr("data-modal-id")),0===this.modal.length&&(this.modal=e('<div id="ekkoLightbox-'+this.$element.attr("data-modal-id")+'" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title"></h4><button type="button" class="close" data-dismiss="modal" aria-label="'+this.options.strings.close+'"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item fade"></div><div class="ekko-lightbox-item fade"></div></div></div><div class="modal-footer"></div></div></div></div>'),e(this.options.doc).find("body").append(this.modal)),this.modal.find(".modal-dialog").css({width:this.options.width||""}),this.modal.find(".modal-header .modal-title").html(this.options.title||""),this.modal.find(".modal-header .close").css(this.options.alwaysShowClose||""!==this.options.title?{}:{display:"none"}),this.modal.find(".modal-footer").html(this.options.footer||""),this.modal.on("show.bs.modal",this.options.onShow.bind(this)).on("shown.bs.modal",function(){n.prevActive=document.activeElement,n.options.onShown.call(n)}).on("hide.bs.modal",this.options.onHide.bind(this)).on("hidden.bs.modal",function(){if(n.gallery){e(document).off("keydown.ekkoLightbox");var t=0;e(n.gallery).each(function(){e(this).attr("data-gallery-index",t++)})}n.modal.remove(),n.options.onHidden.call(n)}).modal("show",t),this.modal.on("click",function(t){var o=e(t.target);t.target===this||o.hasClass("modal-dialog")||o.parents(".modal-dialog").length||n.navigateClicked||n.close()}),this.modal.find(".modal-content").swipe({threshold:75,preventDefaultEvents:!1,allowPageScroll:"vertical",swipeLeft:function(){e(this).trigger("next.ekkoLightbox")},swipeRight:function(){e(this).trigger("prev.ekkoLightbox")}})},initRemoteContent:function(){var t=this;this.gallery=this.$element.attr("data-gallery"),this.gallery&&(this.gallery=e(document.body).find('*[data-gallery="'+this.gallery+'"]'),0===this.gallery.length&&(this.gallery=null),this.gallery&&this.gallery.length>1&&(this.navigateClicked=!1,this.gallery.each(function(n,o){e(o).attr("data-gallery-index",n)}))),this.$element.attr("data-remote")||this.$element.attr("href")?(this.type=this.detectRemoteType(this.$element.attr("data-type")||this.$element.attr("data-remote")||this.$element.attr("href")),this.src=this.detectRemoteContent(this.$element.attr("data-remote")||this.$element.attr("href"))):this.type=!1},initGalleryEvents:function(){if(this.gallery&&this.gallery.length>1){this.navigateClicked=!1;var t=this;e(this.gallery).on("click.ekkoLightbox",this.options.delegate||null,function(n){if(n.preventDefault(),n.stopPropagation(),e(this).hasClass("disabled"))return void n.preventDefault();var o=e(this);return o.attr("data-remote")&&""!==o.attr("data-remote")||o.attr("href")&&""!==o.attr("href")||o.attr("data-gallery")?t.navigateClicked?!1:(t.navigateClicked=!0,t.navigate(e(this).attr("data-gallery-index")),void(n.delegatedCall=!0)):void n.preventDefault()}),this.modal.on("shown.bs.modal",function(){e(document).off("keydown.ekkoLightbox").on("keydown.ekkoLightbox",function(e){if(e.keyCode===39)return t.navigateRight(),!1;if(e.keyCode===37)return t.navigateLeft(),!1})}),this.modal.on("hide.bs.modal",function(){e(document).off("keydown.ekkoLightbox")}),this.modal.on("click","a:not([data-gallery-index])",function(e){e.preventDefault(),t.close()})}},initFunctions:function(){var t=this;this.modal.on("next.ekkoLightbox",function(){t.navigateRight()}),this.modal.on("prev.ekkoLightbox",function(){t.navigateLeft()}),this.modal.on("swipeLeft.ekkoLightbox",function(){t.navigateRight()}),this.modal.on("swipeRight.ekkoLightbox",function(){t.navigateLeft()})},close:function(){this.modal.modal("hide")},navigate:function(e){if(e=parseInt(e),!(this.gallery&&this.gallery.length<=e||e<0)){var t=this.gallery.eq(e);this.navigateDirection=e<this.$element.attr("data-gallery-index")?"left":"right",this.options.onNavigate.call(this,this.navigateDirection,e),this.lightboxOpen=!1,this.gallery=t.attr("data-gallery"),t.trigger("click.ekkoLightbox")}},navigateLeft:function(){if(this.gallery&&this.gallery.length>1){var e=parseInt(this.$element.attr("data-gallery-index"));e===0?this.gallery.length-1!==0&&this.navigate(this.gallery.length-1):this.navigate(e-1)}},navigateRight:function(){if(this.gallery&&this.gallery.length>1){var e=parseInt(this.$element.attr("data-gallery-index"));this.navigate(e===this.gallery.length-1?0:e+1)}},detectRemoteType:function(e,t){var n=["youtube","vimeo","instagram","video","url"];if("image"===e||this.isImage(this.$element.attr("href")||this.$element.attr("data-remote")||""))return"image";if("no-gallery"===e)return!1;if("youtube"===e||this.isYouTubeVideo(t||this.$element.attr("href")||this.$element.attr("data-remote")||""))return"youtube";if("vimeo"===e||this.isVimeoVideo(t||this.$element.attr("href")||this.$element.attr("data-remote")||""))return"vimeo";if("instagram"===e||this.isInstagramImage(t||this.$element.attr("href")||this.$element.attr("data-remote")||""))return"instagram";if("video"===e||this.isVideo(t||this.$element.attr("href")||this.$element.attr("data-remote")||""))return"video";if("url"===e||this.isPartOfUrl(t||this.$element.attr("href")||this.$element.attr("data-remote")||""))return"url";if(e&&-1!==n.indexOf(e.toLowerCase()))return e;return this.options.type&&"image"!==this.options.type?this.options.type:this.options.defaultType},isImage:function(e){return e&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isYouTubeVideo:function(e){return!!e&&e.match(/^(?:https?:)?\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)},isVimeoVideo:function(e){return!!e&&e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/)},isInstagramImage:function(e){return!!e&&e.match(/(?:www\.)?instagr(?:\.am|am\.com)\/p\/([a-zA-Z0-9_\-]+)(?:\/media)?/)},isVideo:function(e){return!!e&&e.match(/\.(mp4|ogg|webm)(\?.*)?$/)},isPartOfUrl:function(e){return!!e&&e.match(/\S+\.\S+/)},detectRemoteContent:function(e){var t,n=this;return this.isImage(e)?(this.getRemoteContentType="image",e):(t=this.isYouTubeVideo(e))?(this.getRemoteContentType="youtube",t[1]):(t=this.isVimeoVideo(e))?(this.getRemoteContentType="vimeo",t[5]):(t=this.isInstagramImage(e))?(this.getRemoteContentType="instagram","https://instagram.com/p/"+t[1]+"/media/?size=l"):(t=this.isVideo(e))?(this.getRemoteContentType="video",e):(this.getRemoteContentType="url",e)},loadRemoteContent:function(t,n){var o,i=this,a=this.modal.find(".modal-body .ekko-lightbox-container"),s=this.modal.find(".modal-header h4.modal-title").find("small").remove().end(),l=null;if(n=n||function(){},a.html(this.options.loadingMessage),this.modal.find(".modal-dialog").css({width:this.options.width||""}),this.modal.find(".modal-footer").hide(),this.$element.attr("title")||this.$element.attr("data-title")||this.$element.attr("data-original-title")?(s.html(this.$element.attr("title")||this.$element.attr("data-title")||this.$element.attr("data-original-title")),this.modal.find(".modal-header").show()):this.modal.find(".modal-header").hide(),null===this.gallery&&(this.modal.find(".modal-header .ekko-lightbox-nav-overlay").remove(),this.modal.find(".modal-header .ekko-lightbox-close").remove(),this.modal.find(".modal-header").css({display:"block"})),this.gallery){if(this.navigateClicked=!1,this.gallery.length>1){this.modal.find(".modal-header").append('<div class="ekko-lightbox-nav-overlay"><a href="#" class="'+this.strip_stops(this.options.leftArrow)+'"></a><a href="#" class="'+this.strip_stops(this.options.rightArrow)+'"></a></div>');var r=this.modal.find(".ekko-lightbox-nav-overlay").find("a");this.modal.on("click",".ekko-lightbox-nav-overlay a",function(t){t.preventDefault(),t.stopPropagation();var n=e(this);i.navigateClicked=!0,i.navigate(n.hasClass("ekko-lightbox-left-arrow")?parseInt(i.$element.attr("data-gallery-index"))-1:parseInt(i.$element.attr("data-gallery-index"))+1)}),this.options.showArrows&&this.gallery.length>1&&r.show()}else this.modal.find(".modal-header").find(".ekko-lightbox-nav-overlay").remove()}switch(this.getRemoteContentType){case"image":var d=e("<img />").addClass("img-fluid");return d.one("load",function(){var t=e("<div />").addClass("ekko-lightbox-item").append(d);a.html(t),i.modal.find(".modal-dialog").css({width:"auto"===i.options.width?d[0].naturalWidth:i.options.width}),i.options.onContentLoaded.call(i),n(d)}),d.one("error",function(){var t=e("<div>").html(i.options.strings.fail),o=a.find(".ekko-lightbox-placeholder");o.length>0?o.html(t):a.html(t),i.options.onContentLoaded.call(i)}),d.attr("src",t),void(this.modal.find(".modal-dialog").css({width:this.options.width||""}));case"youtube":o="//www.youtube.com/embed/"+t+"?badge=0&autoplay=1&html5=1";l=e("<div>");return l.addClass("ekko-lightbox-item embed-responsive embed-responsive-16by9"),l.html('<iframe width="'+this.options.width+'" height="'+this.options.height+'" src="'+o+'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe>'),a.html(l),this.options.onContentLoaded.call(this),void n(l);case"vimeo":o="//player.vimeo.com/video/"+t+"?autoplay=1";l=e("<div>");return l.addClass("ekko-lightbox-item embed-responsive embed-responsive-16by9"),l.html('<iframe width="'+this.options.width+'" height="'+this.options.height+'" src="'+o+'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe>'),a.html(l),this.options.onContentLoaded.call(this),void n(l);case"instagram":var c=this,h=t;return e.get("https://api.instagram.com/oembed?url=http://instagr.am/p/"+h+"/",function(t){l=e("<div>");l.addClass("ekko-lightbox-item"),l.html(t.html),a.html(l),c.options.onContentLoaded.call(c)}),void n(l);case"video":l=e("<div>");return l.addClass("ekko-lightbox-item embed-responsive embed-responsive-16by9"),l.html('<video class="embed-responsive-item" controls width="'+this.options.width+'"><source src="'+t+'" type="video/mp4"></video>'),a.html(l),this.options.onContentLoaded.call(this),void n(l);default:return e.ajax({url:t,dataType:"html",success:function(t){var o;o=e(t).find(".modal-body").length>0?e(t).find(".modal-body").html():e(t).filter(".modal-body").length>0?e(t).filter(".modal-body").html():t,a.html(o),i.modal.find(".modal-dialog").css({width:i.options.width||""}),i.options.onContentLoaded.call(i),n(o)},error:function(){var t=e("<div>").html(i.options.strings.fail);a.html(t),i.options.onContentLoaded.call(i),n(t)}}),void 0}},strip_stops:function(e){return e.replace(/\./g,"")},isImage:function(e){return e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSwf:function(e){return e.match(/\.(swf)((\?|#).*)?$/i)},getYoutubeId:function(e){var t;return e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)?!1:(t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/))&&11===t[2].length?t[2]:!1},getVimeoId:function(e){return e.indexOf("vimeo")>0?e:!1},getInstagramId:function(e){return e.indexOf("instagram")>0?e:!1}},e.fn.ekkoLightbox=function(n){return this.each(function(){var o=e(this);o.data("ekkoLightbox")||(o.data("ekkoLightbox",new t(this,n)),o.attr("data-modal-id",o.data("ekkoLightbox").modal_id))})}}); 